<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Will You Be My Valentine? üíñ</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&family=Pacifico&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --pink: #ff4d8d;
            --dark: #1a1a1a;
            --bg1: #ffe6f0;
            --bg2: #ffd6eb;
        }

        * {
            box-sizing: border-box
        }

        body {
            margin: 0;
            height: 100vh;
            overflow: hidden;
            font-family: Poppins, system-ui, Arial;
            background: linear-gradient(135deg, var(--bg1), var(--bg2));
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card {
            position: relative;
            width: min(92vw, 520px);
            text-align: center;
            padding: 40px 20px 50px;
            border-radius: 24px;
            background: white;
            box-shadow: 0 20px 60px rgba(0, 0, 0, .18);
            animation: float 4s ease-in-out infinite;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0)
            }

            50% {
                transform: translateY(-10px)
            }
        }

        h1 {
            font-family: Pacifico, cursive;
            color: var(--pink);
            font-size: 38px;
            margin: 10px 0 8px;
        }

        p {
            color: #444;
            margin-bottom: 30px;
        }

        .buttons {
            position: relative;
            height: 140px;
        }

        button {
            border: none;
            padding: 14px 26px;
            font-size: 18px;
            border-radius: 40px;
            cursor: pointer;
            position: absolute;
            transition: transform .25s ease, box-shadow .25s ease, background .25s;
        }

        #yesBtn {
            left: 18%;
            background: var(--pink);
            color: white;
            box-shadow: 0 10px 25px rgba(255, 77, 141, .5);
        }

        #yesBtn:hover {
            transform: scale(1.15);
            box-shadow: 0 14px 35px rgba(255, 77, 141, .7);
        }

        #noBtn {
            right: 18%;
            background: #eee;
            color: #333;
        }

        #noBtn.shake {
            animation: shake .4s ease;
        }

        @keyframes shake {
            0% {
                transform: translateX(0)
            }

            25% {
                transform: translateX(-8px)
            }

            50% {
                transform: translateX(8px)
            }

            75% {
                transform: translateX(-6px)
            }

            100% {
                transform: translateX(0)
            }
        }

        /* Success message */
        .success {
            position: absolute;
            inset: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #fff0f6, #ffe0ef);
            border-radius: 24px;
            opacity: 0;
            pointer-events: none;
            transition: opacity .6s ease;
        }

        .success.show {
            opacity: 1;
            pointer-events: auto;
        }

        .success h2 {
            font-family: Pacifico, cursive;
            font-size: 42px;
            color: var(--pink);
            margin-bottom: 12px;
            animation: pop .6s ease forwards;
        }

        @keyframes pop {
            0% {
                transform: scale(.3);
                opacity: 0
            }

            100% {
                transform: scale(1);
                opacity: 1
            }
        }

        canvas {
            position: fixed;
            inset: 0;
            pointer-events: none;
        }

        .heart {
            position: fixed;
            font-size: 20px;
            animation: rise 4s linear forwards;
            pointer-events: none;
        }

        @keyframes rise {
            0% {
                transform: translateY(0) scale(.7);
                opacity: 1
            }

            100% {
                transform: translateY(-120vh) scale(1.6);
                opacity: 0
            }
        }
    </style>
</head>

<body>

    <canvas id="confetti"></canvas>

    <div class="card">
        <h1>Hey You üíò</h1>
        <p>I have a very important question...</p>
        <h2 style="margin-top:-10px">Will you be my Valentine?</h2>

        <div class="buttons">
            <button id="yesBtn">YES ‚ù§Ô∏è</button>
            <button id="noBtn">NO üôà</button>
        </div>

        <div class="success" id="successBox">
            <h2>Yayyyyy!!! üíñ</h2>
            <p>You just made my day (and probably my whole year) üòç</p>
        </div>
    </div>

    <script>
        // --- NO BUTTON RUNS AWAY ---
        const noBtn = document.getElementById('noBtn');

        function moveButton() {
            const padding = 80;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;

            const x = Math.random() * maxX + padding / 2;
            const y = Math.random() * maxY + padding / 2;

            noBtn.style.left = x + 'px';
            noBtn.style.top = y + 'px';
        }

        // proximity detection
        window.addEventListener('mousemove', (e) => {
            const rect = noBtn.getBoundingClientRect();
            const dx = e.clientX - (rect.left + rect.width / 2);
            const dy = e.clientY - (rect.top + rect.height / 2);
            const distance = Math.sqrt(dx * dx + dy * dy);

            if (distance < 120) moveButton();
        });

        // if clicked accidentally
        noBtn.addEventListener('click', () => {
            noBtn.classList.add('shake');
            setTimeout(() => noBtn.classList.remove('shake'), 400);
            moveButton();
        });

        // --- YES BUTTON SUCCESS ---
        const yesBtn = document.getElementById('yesBtn');
        const success = document.getElementById('successBox');

        yesBtn.addEventListener('click', () => {
            success.classList.add('show');
            startConfetti();
            spawnHearts();
        });

        // --- HEART FLOATS ---
        function spawnHearts() {
            setInterval(() => {
                const heart = document.createElement('div');
                heart.className = 'heart';
                heart.innerHTML = 'üíñ';
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.bottom = '-20px';
                document.body.appendChild(heart);
                setTimeout(() => heart.remove(), 4000);
            }, 250);
        }

        // --- CONFETTI ---
        const canvas = document.getElementById('confetti');
        const ctx = canvas.getContext('2d');
        let pieces = [];

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resize);
        resize();

        function startConfetti() {
            for (let i = 0; i < 140; i++) {
                pieces.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height - canvas.height,
                    size: 6 + Math.random() * 6,
                    speed: 1 + Math.random() * 3,
                    angle: Math.random() * Math.PI * 2
                });
            }
            requestAnimationFrame(update);
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            pieces.forEach(p => {
                p.y += p.speed;
                p.x += Math.sin(p.angle);
                ctx.fillStyle = `hsl(${Math.random() * 360},80%,60%)`;
                ctx.fillRect(p.x, p.y, p.size, p.size);
                if (p.y > canvas.height) p.y = -10;
            });
            requestAnimationFrame(update);
        }
    </script>
    <script>
        (function () {
            try {
                const params = new URLSearchParams(window.location.search);
                let name = params.get('name');
                const DEFAULT_NAME = 'Someone Special';
                if (!name || !name.trim()) name = DEFAULT_NAME;

                // Update page title
                document.title = `For ${name} üíñ`;

                // Add a cute top ribbon with the name
                const ribbon = document.createElement('div');
                ribbon.style.position = 'fixed';
                ribbon.style.top = '0';
                ribbon.style.left = '0';
                ribbon.style.right = '0';
                ribbon.style.padding = '10px 14px';
                ribbon.style.background = 'linear-gradient(90deg,#ff7aa2,#ff4d6d)';
                ribbon.style.color = '#fff';
                ribbon.style.textAlign = 'center';
                ribbon.style.fontWeight = '700';
                ribbon.style.zIndex = '9999';
                ribbon.style.boxShadow = '0 6px 20px rgba(0,0,0,0.15)';
                ribbon.innerHTML = `For <span style="letter-spacing:1px">${name}</span> üíå`;
                document.body.appendChild(ribbon);

                // If success message container exists, personalize it
                const success = document.querySelector('#successMessage, .success-message, [data-success]');
                if (success && !success.dataset.personalized) {
                    const p = document.createElement('div');
                    p.style.marginTop = '8px';
                    p.style.fontSize = '18px';
                    p.innerHTML = `${name}, you just made my day ü•π‚ù§Ô∏è`;
                    success.appendChild(p);
                    success.dataset.personalized = '1';
                }
            } catch (e) { console.warn('name personalization failed', e) }
        })();
    </script>
</body>

</html>